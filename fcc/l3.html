<!DOCTYPE html>
<html lang="en">
   <head>
      <title>Learn Istio – How to Manage, Monitor, and Secure Microservices</title>
      <link rel="stylesheet" type="text/css" href="fcc.css" />
   </head>

   <body class="home-template">

         <section class="post-full-content">
                  <pre>
<code>CONTAINER ID   IMAGE                  COMMAND        NAMES
2974301ffa31   kindest/node:v1.23.1   "/usr/loca…"   kind-control-plane
</code>
</pre>
               </section>




      <div class="site-wrapper">

      <div id="error-message"></div>
      <main id="site-main" class="post-template site-main outer">
      <div class="inner">
         <header class="post-full-header">

            <h1 class="post-full-title">Learn Istio – How to Manage, Monitor, and Secure Microservices</h1>
         </header>


         <section class="post-full-content">
            <div class="post-and-sidebar">
               <section class="post-content ">
                  



                  <pre>
<code>CONTAINER ID   IMAGE                  COMMAND        NAMES
2974301ffa31   kindest/node:v1.23.1   "/usr/loca…"   kind-control-plane
</code>
</pre>
                  <p>
                     <strong>NOTE:
                     </strong> Istio 1.13 is compatible with versions 1.20 and onwards of Kubernetes. To learn about the supported releases of Kubernetes, check the official docs at 
                     <a href="https://istio.io/latest/docs/releases/supported-releases/" rel="nofollow">Istio: Supported Kubernetes releases.
                     </a>
                  </p>
                  <h3 id="how-to-install-istio-on-the-cluster">How to install Istio on the cluster</h3>
                  <p>You can install Istio either with the 
                     <code>istioctl
                     </code> utility or the 
                     <code>helm
                     </code> package manager. To get 
                     <code>istioctl
                     </code>, download the Istio release artifacts, as shown below.
                  </p>
                  <pre>
<code class="language-bash">curl -L https://istio.io/downloadIstio | \
  ISTIO_VERSION=1.13.2 TARGET_ARCH=x86_64 sh -
</code>
</pre>
                  <p>In the downloaded directory, you will find the 
                     <code>istioctl
                     </code> CLI tool under 
                     <code>istio-1.13.2/bin/istioctl
                     </code>. Next, move the binary within your PATH environment variable—​so that you can execute 
                     <code>istioctl
                     </code> commands from any directory.
                  </p>
                  <p>After that, install Istio with the command below:</p>
                  <pre>
<code class="language-bash">istioctl install --set profile=demo -y
</code>
</pre>
                  <p>It might take several minutes for this command to complete as it waits for all Pods to be running. After it finishes, print the deployed Pods in the Istio installation namespace.</p>
                  <pre>
<code class="language-bash">kubectl get pods -n istio-system
</code>
</pre>
                  <p>You should see the output below.</p>
                  <pre>
<code>NAME                                   READY   STATUS    RESTARTS
istio-egressgateway-6cf5fb4756-r569f   1/1     Running   0
istio-ingressgateway-dc9c8f588-cn2z4   1/1     Running   0
istiod-7586c7dfd8-2nbsk                1/1     Running   0
</code>
</pre>
                  <p>The installed components are:</p>
                  <ul>
                     <li>
                        <strong>Istio egress gateway
                        </strong> – used for securing egress traffic
                     </li>
                     <li>
                        <strong>Istio ingress gateway
                        </strong> – the entry point of traffic coming into your cluster
                     </li>
                     <li>
                        <strong>Istiod
                        </strong> – Istio’s control plane that configures the service proxies
                     </li>
                  </ul>
                  <h3 id="how-to-install-the-istio-add-ons">How to install the Istio add-ons</h3>
                  <p>The Istio artifacts downloaded earlier contain sample tools to visualize the generated telemetry. To deploy those into your cluster, execute the command below:</p>
                  <pre>
<code class="language-bash">kubectl apply -f istio-1.13.2/samples/addons/
</code>
</pre>
                  <p>This installs the following tools: Prometheus, Grafana, Kiali, and Jaeger. We will take a look at those later on. But, first, we need some services.</p>
                  <h3 id="the-sample-application-sentiment-analysis">The sample application: Sentiment Analysis</h3>
                  <p>We’ll run the microservice application used in my 
                     <a href="https://www.freecodecamp.org/news/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882" rel="nofollow">Kubernetes introductory article
                     </a>. It’s complex enough to showcase Istio’s features in practice.
                  </p>
                  <figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption">
                     <img src="https://www.freecodecamp.org/news/content/images/2022/05/sentiment-analysis-app.png" class="kg-image" alt="sentiment-analysis-app" srcset="https://www.freecodecamp.org/news/content/images/size/w600/2022/05/sentiment-analysis-app.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/sentiment-analysis-app.png 905w" width="600" height="400" loading="lazy">
                     <figcaption>The sentiment analysis services</figcaption>
                  </figure>
                  <p>The figure above shows the services that comprise the app:</p>
                  <ul>
                     <li>The 
                        <strong>SA-Frontend
                        </strong> — service serves the frontend; a React JavaScript application
                     </li>
                     <li>The 
                        <strong>SA-WebApp
                        </strong> — service handles queries for analyzing the sentiment of sentences
                     </li>
                     <li>The 
                        <strong>SA-Logic
                        </strong> — service performs sentiment analysis
                     </li>
                     <li>The 
                        <strong>SA-Feedback
                        </strong> — service records the user feedback about the accuracy of the analysis
                     </li>
                  </ul>
                  <p>Additionally, the figure shows a layer 7 proxy that reverse-proxies traffic based on the request’s path. Within Istio’s mesh, the 
                     <em>Ingress Gateway
                     </em> is the entry point for traffic and routes it to the services.
                  </p>
                  <p>Next, clone the repository containing the services and configuration we need throughout the article:</p>



                  <pre>
<code class="language-bash">git clone https://github.com/rinormaloku/master-istio.git 
cd master-istio
</code>
</pre>
                  <p>Proceed to deploy the services:</p>
                  <pre>
<code>kubectl apply -f ./kube
</code>
</pre>
                  <p>Next, verify that the sidecar got injected into each of the service pods with the following command:</p>
                  <pre>
<code class="language-bash">$ kubectl get pods -n demo

NAME                           READY     STATUS    RESTARTS   AGE
sa-feedback-55f5dc4d9c-c9wfv   2/2       Running   0          12m
sa-frontend-558f8986-hhkj9     2/2       Running   0          12m
sa-logic-568498cb4d-2sjwj      2/2       Running   0          12m
sa-logic-568498cb4d-p4f8c      2/2       Running   0          12m
sa-web-app-599cf47c7c-s7cvd    2/2       Running   0          12m
</code>
</pre>
                  <p>Ensure that under the 
                     <code>READY
                     </code> column, you see the value “2/2”. This shows that both containers are running: the app container, and the sidecar proxy. Visualized in the figure below, where we zoom into one Pod.
                  </p>
                  <figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption">
                     <img src="https://www.freecodecamp.org/news/content/images/2022/05/zoom-into-workload.png" class="kg-image" alt="zoom-into-workload" srcset="https://www.freecodecamp.org/news/content/images/size/w600/2022/05/zoom-into-workload.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/zoom-into-workload.png 664w" width="600" height="400" loading="lazy">
                     <figcaption>Figure 7. Zooming into one Pod: The sidecar container is injected into the pod</figcaption>
                  </figure>
                  <p>Our services are ready to receive end-user traffic. So for that purpose, we need to expose those next.</p>

                  <p>Hey! You got to the bottom of this article. Congrats, and well done! It was a rather long one, but after investing a few hours into it and on yourself — you have a clear idea of what 
                     <code>Istio
                     </code> is and what it can do for you and your business.
                  </p>
                  <p>A summary of what we covered:</p>
                  <!--kg-card-begin: markdown-->
                  <ul>
                     <li>Service meshes are implemented by adding a proxy alongside the application and intercepting all network traffic to and from it.</li>
                     <li>
                        The proxy enables:
                        <ul>
                           <li>
                              <strong>Advanced traffic management
                              </strong>
                              <ul>
                                 <li>Using 
                                    <code>Gateways
                                    </code>, we define the traffic that is accepted into a service proxy (including the ingress gateway)
                                 </li>
                                 <li>Using 
                                    <code>VirtualServices
                                    </code>, we define how to route traffic to a destination.
                                 </li>
                                 <li>Using 
                                    <code>DestinationRules
                                    </code>, we define policies after routing has occurred. In our instance, we only used it to define subsets.
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <strong>Making an observable system by generating telemetry
                              </strong>
                              <ul>
                                 <li>Access logs record the results of individual requests.</li>
                                 <li>Traces show the flow of a request through services. Visualized by Inspector Gadget (
                                    <em>I couldn't resist, but you know that I mean Jaeger ;P
                                    </em>) and Kiali
                                 </li>
                                 <li>Metrics measure properties of the system, success rate, operations per second, and so on.</li>
                              </ul>
                           </li>
                           <li>
                              <strong>Security
                              </strong>
                              <ul>
                                 <li>The 
                                    <code>PeerAuthenticaiton
                                    </code> resource enforces only mutually authenticated traffic, ensuring that all service-to-service traffic is encrypted and that clear-text traffic is rejected.
                                 </li>
                                 <li>The 
                                    <code>RequestAuthentication
                                    </code> resource authenticates JWTs against the configured JWKS.
                                 </li>
                                 <li>The 
                                    <code>AuthorizationPolicy
                                    </code> resource enables us to make decisions on whether to accept or reject traffic.
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <!--kg-card-end: markdown-->
                  <h3 id="additional-reading">Additional reading</h3>
                  <p>After reading until here, you know more about Istio than many folks out there, even some that run services on production with it. </p>
                  <p>However, some of Istio’s quirks might catch you by surprise. Sometimes, your application and the proxy might misbehave. And you will have other questions such as:</p>
                  <ul>
                     <li>How to troubleshoot the service proxy or the ingress gateway?</li>
                     <li>How to make sense of the Envoy configuration that is applied?</li>
                     <li>How to use fault injection?</li>
                     <li>Securing traffic at the edge</li>
                     <li>How to set up multi-cluster service meshes? What is happening behind the scenes?</li>
                     <li>Is the integration of machine-based workloads possible? If yes, how?</li>
                     <li>How to use external authorization servers?</li>
                     <li>Day 2 operations</li>
                  </ul>
                  <p>We answer these and many other questions in the book 
                     <a href="https://www.manning.com/books/istio-in-action?utm_source=rinor&amp;utm_medium=affiliate&amp;utm_campaign=book_posta2_istio_9_30_18&amp;a_aid=rinor&amp;a_bid=9f6a70f3" rel="nofollow">"Istio in Action."
                     </a> What really makes me proud of the book — besides it being the most in-depth elaboration of Istio — is how much reference value it has. 
                  </p>
                  <p>It’s crazy. I find myself and other Field Engineers here at Solo going back to it whenever we solve some tricky issue, such as DNS resolution, troubleshooting cross-cluster traffic, and so on.</p>
                  <p>Here are some other useful resources:</p>
                  <ul>
                     <li>
                        <a href="https://istio.io/latest/docs/reference/config/" rel="nofollow">Istio configuration reference
                        </a>
                     </li>
                     <li>
                        <a href="https://istio.io/latest/blog/" rel="nofollow">Istio’s blog
                        </a>
                     </li>
                     <li>Solo’s 
                        <a href="https://www.solo.io/blog/" rel="nofollow">blog
                        </a> and 
                        <a href="https://www.youtube.com/channel/UCuketWAG3WqYjjxtQ9Q8ApQ" rel="nofollow">YouTube channel
                        </a>
                     </li>
                     <li>
                        <a href="https://blog.christianposta.com/" rel="nofollow">Christian Posta’s blog
                        </a>
                     </li>
                     <li>
                        <a href="https://karlstoney.com/tag/istio/" rel="nofollow">Karl Stoney’s blog
                        </a>
                     </li>
                  </ul>
                  <p>I seize the opportunity to say thanks for joining me on this voyage. It wasn’t easy, and you are amazing for sticking with it. </p>
                  <p>I would love to hear your thoughts, so feel free to reach out to me on Twitter (
                     <a href="https://twitter.com/rinormaloku" rel="nofollow">@rinormaloku
                     </a>) or on my page 
                     <a href="https://rinormaloku.com/" rel="nofollow">rinormaloku.com
                     </a>.
                  </p>
               </section>

           </div>
                        
         </section>
   </body>
</html>

